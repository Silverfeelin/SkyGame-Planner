{"version":3,"file":"932.24c7ac7a9b1643f0.js","mappings":"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","names":["EditorDashboardComponent","selectors","i0","nanoid","size","crypto","getRandomValues","Uint8Array","reduce","id","byte","toString","toUpperCase","DataJsonService","constructor","travelingSpiritsToJson","ts","this","stringify","map","date","moment","guid","day","month","year","spirit","tree","spiritTreesToJson","trees","node","nodesToJson","nodes","item","c","h","sc","sh","ac","nw","n","ne","itemsToJson","items","type","name","icon","level","array","JSON","undefined","factory","EditorTravelingSpiritComponent","dataService","dataJsonService","Array","tsCount","travelingSpiritConfig","length","spiritOptions","spiritConfig","filter","s","sort","a","b","localeCompare","lastDate","at","add","isoWeekday","format","formNodes","i","push","spiritChanged","forEach","itemOptions","lastTs","reverse","find","spiritTree","existingNodes","NodeHelper","nodeToFormNodes","ItemType","createWingBuff","createHeart","createBlessing","toggleConnection","direction","submit","tsVisits","alert","baseNode","formNodeToNodes","Date","endDate","toDate","number","visit","console","log","result","copyToClipboard","value","getForClipboard","startI","indexOf","endI","lastIndexOf","substring","navigator","clipboard","writeText","newItems","guidMap","has","getNextThursday","now","isoWeek","mainNode","defineNode","formNode","formNodeToNode","j","relativeNode","core","ctx","EditorTreeComponent","_dataService","_dataJsonService","_route","ngOnInit","copyTree","snapshot","queryParams","copy","get","itemConfig","itemInputChanged","event","target","jsonNode","getNodeFromJson","itemRef","blur","itemInputEnter","key","fuzzysort","limit","obj","ec","copyNodeToClipboard","json","parse","EditorShopComponent","shopGuidChanged","copyShopGuid","shop","copyShop","iaps","iap","price","returning","sp","newShop","EditorItemComponent","generate","iRevision","routes","path","component","EditorRoutingModule","RouterModule","EditorModule","CommonModule","FormsModule","MatIconModule"],"sourceRoot":"webpack:///","sources":["./src/app/editor/components/dashboard/editor-dashboard.component.ts","./src/app/editor/components/dashboard/editor-dashboard.component.html","./node_modules/nanoid/index.browser.js","./src/app/services/data-json.service.ts","./src/app/editor/components/editor-traveling-spirit/editor-traveling-spirit.component.html","./src/app/editor/components/editor-traveling-spirit/editor-traveling-spirit.component.ts","./src/app/editor/components/editor-tree/editor-tree.component.html","./src/app/editor/components/editor-tree/editor-tree.component.ts","./src/app/editor/components/editor-shop/editor-shop.component.html","./src/app/editor/components/editor-shop/editor-shop.component.ts","./src/app/editor/components/editor-item/editor-item.component.html","./src/app/editor/components/editor-item/editor-item.component.ts","./src/app/editor/editor-routing.module.ts","./src/app/editor/editor.module.ts"],"sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-editor-dashboard',\n  templateUrl: './editor-dashboard.component.html',\n  styleUrls: ['./editor-dashboard.component.less']\n})\nexport class EditorDashboardComponent {\n\n}\n","<a [routerLink]=\"['/editor/ts']\">Create TS</a>\n<a [routerLink]=\"['/editor/tree']\">Create Spirit Tree</a>\n<a [routerLink]=\"['/editor/shop']\">Create Shop</a>\n","export { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\n","import { Injectable } from '@angular/core';\nimport moment from 'moment';\nimport { IItem } from '../interfaces/item.interface';\nimport { INode } from '../interfaces/node.interface';\nimport { ISpiritTree } from '../interfaces/spirit-tree.interface';\nimport { ITravelingSpirit } from '../interfaces/traveling-spirit.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataJsonService {\n\n  constructor() { }\n\n  travelingSpiritsToJson(ts: Array<ITravelingSpirit>): string {\n    return this.stringify(ts.map(ts => {\n      const date = moment(ts.date);\n      return {\n        guid: ts.guid,\n        date: { day: date.date(), month: date.month() + 1, year: date.year() },\n        spirit: ts.spirit.guid,\n        tree: ts.tree.guid\n      };\n    }));\n  }\n\n  spiritTreesToJson(trees: Array<ISpiritTree>): string {\n    return this.stringify(trees.map(tree => {\n      return {\n        guid: tree.guid,\n        node: tree.node.guid\n      };\n    }));\n  }\n\n  nodesToJson(nodes: Array<INode>): string {\n    return this.stringify(nodes.map(node => {\n      return {\n        guid: node.guid,\n        item: node.item?.guid,\n        c: node.c,\n        h: node.h,\n        sc: node.sc,\n        sh: node.sh,\n        ac: node.ac,\n        nw: node.nw?.guid,\n        n: node.n?.guid,\n        ne: node.ne?.guid\n      };\n    }));\n  }\n\n  itemsToJson(items: Array<IItem>): string {\n    return this.stringify(items.map(item => {\n      return {\n        guid: item.guid,\n        type: item.type,\n        name: item.name,\n        icon: item.icon,\n        level: item.level\n      };\n    }));\n  }\n\n  private stringify(array: Array<unknown>): string {\n    return JSON.stringify(array, undefined, 2);\n  }\n}\n","<div>\n  There are currently {{ tsCount }} TS registered. Add #{{ tsCount + 1 }} now.\n</div>\n\n<div>\n  Spirit:\n  <select class=\"mono\" [(ngModel)]=\"spirit\" (ngModelChange)=\"spiritChanged()\">\n    <option *ngFor=\"let option of spiritOptions\" [value]=\"option.guid\">{{ option.name }}</option>\n  </select>\n</div>\n\n<div>\n  Date:\n  <input type=\"date\" [(ngModel)]=\"date\">\n</div>\n\n<div>\n  Nodes<br/>\n\n  <div class=\"grid-container\">\n    <div class=\"grid-item\" *ngFor=\"let node of formNodes; let i = index;\">\n      <div *ngIf=\"i%3===1\"\n        class=\"grid-item-connection grid-item-nw\" [class.green]=\"node.nw\"\n        (click)=\"toggleConnection(node, 'nw')\">NW</div>\n      <div class=\"grid-item-connection grid-item-n\" [class.green]=\"node.n\"\n        (click)=\"toggleConnection(node, 'n')\">N</div>\n      <div *ngIf=\"i%3===1\"\n        class=\"grid-item-connection grid-item-ne\" [class.green]=\"node.ne\"\n        (click)=\"toggleConnection(node, 'ne')\">NE</div>\n\n      <div>\n        <select class=\"mono\" [(ngModel)]=\"node.item\">\n          <option value=\"\"></option>\n          <option *ngFor=\"let option of itemOptions\" [value]=\"option.guid\">\n            {{ option.name }}\n            <span>\n              <ng-container *ngIf=\"option.level\">({{option.level}})</ng-container>\n            </span>\n            <span>({{ option.guid }})</span>\n          </option>\n        </select>\n      </div>\n\n      <div>\n        <mat-icon svgIcon=\"candle\"></mat-icon>\n        <input class=\"cost\" type=\"number\" [(ngModel)]=\"node.c\">\n        <mat-icon svgIcon=\"heart\"></mat-icon>\n        <input class=\"cost\" type=\"number\" [(ngModel)]=\"node.h\">\n        <mat-icon svgIcon=\"ascended-candle\"></mat-icon>\n        <input class=\"cost\" type=\"number\" [(ngModel)]=\"node.ac\">\n      </div>\n    </div>\n  </div>\n</div>\n\n<button type=\"button\" (click)=\"submit()\">Generate</button>\n\n<div *ngIf=\"result\">\n  <button type=\"button\" (click)=\"copyToClipboard('ts')\">\n    Copy TS\n  </button>\n  <button type=\"button\" (click)=\"copyToClipboard('tree')\">\n    Copy Tree\n  </button>\n  <button type=\"button\" (click)=\"copyToClipboard('nodes')\">\n    Copy Nodes\n  </button>\n  <button type=\"button\" (click)=\"copyToClipboard('items')\">\n    Copy Items\n  </button>\n</div>\n","import { Component } from '@angular/core';\nimport moment from 'moment';\nimport { nanoid } from 'nanoid';\nimport { NodeHelper } from 'src/app/helpers/node-helper';\nimport { IItem, ItemType } from 'src/app/interfaces/item.interface';\nimport { INode } from 'src/app/interfaces/node.interface';\nimport { ISpiritTree } from 'src/app/interfaces/spirit-tree.interface';\nimport { ISpirit, SpiritType } from 'src/app/interfaces/spirit.interface';\nimport { ITravelingSpirit } from 'src/app/interfaces/traveling-spirit.interface';\nimport { DataJsonService } from 'src/app/services/data-json.service';\nimport { DataService } from 'src/app/services/data.service';\n\ninterface IFormNode {\n  nw?: boolean;\n  n?: boolean;\n  ne?: boolean\n\n  item?: string;\n\n  c?: number;\n  h?: number;\n  ac?: number;\n}\n\n@Component({\n  selector: 'app-editor-traveling-spirit',\n  templateUrl: './editor-traveling-spirit.component.html',\n  styleUrls: ['./editor-traveling-spirit.component.less']\n})\nexport class EditorTravelingSpiritComponent {\n  tsCount: number;\n  spiritOptions = new Array<ISpirit>();\n  itemOptions = new Array<IItem>();\n\n  // Input\n  spirit?: string;\n  date?: string;\n\n  formNodes: Array<IFormNode>;\n\n  result?: ITravelingSpirit;\n\n  constructor(\n    private readonly dataService: DataService,\n    private readonly dataJsonService: DataJsonService\n  ) {\n      this.tsCount = dataService.travelingSpiritConfig.items.length;\n      this.spiritOptions = dataService.spiritConfig.items\n        .filter(s => s.type === 'Season')\n        .sort((a, b) => a.name.localeCompare(b.name));\n\n      const lastDate = dataService.travelingSpiritConfig.items.at(-1)?.date as Date;\n      this.date = moment(lastDate).add(2, 'weeks').isoWeekday(4).format('YYYY-MM-DD');\n\n      this.formNodes = [];\n      for (let i = 0; i < 24; i++) { this.formNodes.push({\n        n: !((i+2) % 3)\n      }); }\n  }\n\n  spiritChanged(): void {\n    this.formNodes.forEach(n => n.item = undefined);\n\n    this.itemOptions = [];\n\n    // Find last nodes\n    const lastTs = [...this.dataService.travelingSpiritConfig.items].reverse().find(s => s.spirit.guid === this.spirit);\n    const spiritTree = this.dataService.spiritConfig.items.find(s => s.guid === this.spirit)?.tree;\n\n    let existingNodes: Array<INode> = [];\n\n    if (lastTs) {\n      existingNodes = NodeHelper.all(lastTs.tree.node);\n      this.formNodes = this.nodeToFormNodes(lastTs.tree.node);\n    } else if (spiritTree) {\n      // Filter out season-specifics.\n      existingNodes = NodeHelper.all(spiritTree.node).filter(s => {\n        if (s.item?.name === 'Season Heart') { return false; }\n        return true;\n      });\n    }\n\n    // Add items\n    this.itemOptions.push({ guid: 'DON\\'T PICK', name: '-- SPIRIT ITEMS --', type: ItemType.Special });\n    this.itemOptions.push(...existingNodes.filter(n => n.item).map(n => n.item!));\n\n    // Create new items\n    this.itemOptions.push({ guid: 'DON\\'T PICK', name: '-- NEW ITEMS --', type: ItemType.Special });\n    this.itemOptions.push(this.createWingBuff());\n    this.itemOptions.push(this.createHeart());\n    this.itemOptions.push(this.createBlessing());\n    this.itemOptions.push(this.createBlessing());\n    this.itemOptions.push(this.createBlessing());\n    this.itemOptions.push(this.createBlessing());\n  }\n\n  toggleConnection(node: any, direction: string) {\n    node[direction] = !node[direction];\n  }\n\n  submit(): void {\n    const spirit = this.spiritOptions.find(s => s.guid == this.spirit);\n    const tsVisits = this.dataService.travelingSpiritConfig.items.filter(ts => ts.spirit.guid === this.spirit).length;\n\n    if (!spirit) { alert('No spirit'); return; }\n\n    const baseNode = this.formNodeToNodes();\n    const nodes = NodeHelper.all(baseNode);\n\n    // Create tree\n    const tree: ISpiritTree = {\n      guid: nanoid(10),\n      node: nodes[0]\n    };\n\n    // Create ts\n    const ts: ITravelingSpirit = {\n      guid: nanoid(10),\n      date: new Date(this.date!),\n      endDate: moment(this.date).add(4, 'days').toDate(),\n      spirit,\n      tree,\n      number: this.tsCount + 1,\n      visit: tsVisits + 1\n    };\n\n    console.log('ts generated', ts);\n\n    this.result = ts;\n  }\n\n  copyToClipboard(type: string): void {\n    let value = this.getForClipboard(type);\n    if (!value) { return; }\n    const startI = value.indexOf('{');\n    const endI = value.lastIndexOf('}');\n    value = value.substring(startI, endI + 1) + ',';\n    navigator.clipboard.writeText(value);\n  }\n\n  getForClipboard(type: string): string | undefined {\n    switch (type) {\n      case 'ts':\n        return this.dataJsonService.travelingSpiritsToJson([this.result!]);\n      case 'tree':\n        return this.dataJsonService.spiritTreesToJson([this.result!.tree]);\n      case 'nodes':\n        return this.dataJsonService.nodesToJson(NodeHelper.all(this.result!.tree.node));\n      case 'items': {\n        const nodes = NodeHelper.all(this.result!.tree.node);\n        const newItems = nodes\n          .filter(n => n.item?.guid && !this.dataService.guidMap.has(n.item.guid))\n          .map(n => n.item!);\n        return this.dataJsonService.itemsToJson(newItems);\n      }\n    }\n    return undefined;\n  }\n\n  getNextThursday(): Date {\n    const now = moment();\n\n    now.isoWeekday(4);\n    if (now.isoWeek() % 2 === 0) { now.add(7, 'days'); }\n\n    return now.toDate();\n  }\n\n  nodeToFormNodes(mainNode: INode): Array<IFormNode> {\n    const formNodes = new Array<IFormNode>();\n\n    for (let i = 0; i < 24; i++) {\n      formNodes.push({});\n    }\n\n    const defineNode = (i: number, node: INode) => {\n      formNodes[i] = {\n        item: node.item?.guid,\n        c: node.c,\n        h: node.h,\n        ac: node.ac,\n        n: !!node.n,\n        nw: !!node.nw,\n        ne: !!node.ne\n      };\n\n      if (node.nw) { defineNode(i - 1, node.nw); }\n      if (node.n) { defineNode(i - 3, node.n); }\n      if (node.ne) { defineNode(i + 1, node.ne); }\n    };\n\n    let i = 22;\n    defineNode(i, mainNode);\n\n    return formNodes;\n  }\n\n  formNodeToNodes(node?: INode, i = 22): INode {\n    const formNode = this.formNodes[i];\n    node ??= this.formNodeToNode(formNode)!;\n    if (!formNode) { return node; }\n\n    // Left (north-west)\n    if (formNode.nw) {\n      const j = i - 1;\n      const relativeNode = this.formNodeToNode(this.formNodes[j]);\n      if (relativeNode) {\n        node.nw = relativeNode;\n      }\n      this.formNodeToNodes(relativeNode, j);\n    }\n\n    // Top (north)\n    if (formNode.n) {\n      const j = i - 3;\n      const relativeNode = this.formNodeToNode(this.formNodes[j]);\n      if (relativeNode) {\n        node.n = relativeNode;\n      }\n      this.formNodeToNodes(relativeNode, j);\n    }\n\n    // Right (north-east)\n    if (formNode.ne) {\n      const j = i + 1;\n      const relativeNode = this.formNodeToNode(this.formNodes[j]);\n      if (relativeNode) {\n        node.ne = relativeNode;\n      }\n      this.formNodeToNodes(relativeNode, j);\n    }\n\n    return node;\n  }\n\n  formNodeToNode(formNode: IFormNode): INode | undefined {\n    if (!formNode?.item) { return undefined; }\n\n    return {\n      guid: nanoid(10),\n      item: this.itemOptions.find(i => i.guid === formNode.item),\n      c: formNode.c,\n      h: formNode.h,\n      ac: formNode.ac\n    };\n  }\n\n  createHeart(): IItem {\n    return {\n      guid: nanoid(10),\n      type: ItemType.Special,\n      name: 'Heart',\n      icon: 'https://static.wikia.nocookie.net/sky-children-of-the-light/images/d/d9/Heart.png'\n    }\n  }\n\n  createBlessing(): IItem {\n    return {\n      guid: nanoid(10),\n      type: ItemType.Special,\n      name: 'Blessing',\n      icon: 'https://static.wikia.nocookie.net/sky-children-of-the-light/images/8/8e/5CandlesSpell.png'\n    }\n  }\n\n  createWingBuff(): IItem {\n    return {\n      guid: nanoid(10),\n      type: ItemType.WingBuff,\n      name: 'Wing Buff',\n      icon: 'https://static.wikia.nocookie.net/sky-children-of-the-light/images/3/31/Winglight.png'\n    }\n  }\n}\n","<div>\n  Nodes<br/>\n\n  <div class=\"grid-container\">\n    <div class=\"grid-item\" *ngFor=\"let node of formNodes; let i = index;\">\n      <div *ngIf=\"i%3===1\"\n        class=\"grid-item-connection grid-item-nw\" [class.green]=\"node.nw\"\n        (click)=\"toggleConnection(node, 'nw')\">NW</div>\n      <div class=\"grid-item-connection grid-item-n\" [class.green]=\"node.n\"\n        (click)=\"toggleConnection(node, 'n')\">N</div>\n      <div *ngIf=\"i%3===1\"\n        class=\"grid-item-connection grid-item-ne\" [class.green]=\"node.ne\"\n        (click)=\"toggleConnection(node, 'ne')\">NE</div>\n\n      <div>\n        <div class=\"d-inline-block\">{{node.itemRef?.name || ''}}&nbsp;</div>\n        <div class=\"d-inline-block \"><b *ngIf=\"node.item\" (click)=\"copyNodeToClipboard(node)\">{{node.item}}</b></div>\n\n        <input (input)=\"itemInputChanged($event, i)\" (keydown)=\"itemInputEnter($event, i)\">\n      </div>\n\n      <div class=\"mt-1\">\n        <mat-icon svgIcon=\"candle\"></mat-icon>\n        <input class=\"cost\" type=\"number\" [(ngModel)]=\"node.c\">\n        <mat-icon svgIcon=\"heart\"></mat-icon>\n        <input class=\"cost\" type=\"number\" [(ngModel)]=\"node.h\">\n        <mat-icon svgIcon=\"candle\" class=\"seasonal\"></mat-icon>\n        <input class=\"cost\" type=\"number\" [(ngModel)]=\"node.sc\">\n        <mat-icon svgIcon=\"heart\" class=\"seasonal\"></mat-icon>\n        <input class=\"cost\" type=\"number\" [(ngModel)]=\"node.sh\">\n        <mat-icon svgIcon=\"ascended-candle\"></mat-icon>\n        <input class=\"cost\" type=\"number\" [(ngModel)]=\"node.ac\">\n        <mat-icon svgIcon=\"ticket\" [inline]=\"false\"></mat-icon>\n        <input class=\"cost\" type=\"number\" [(ngModel)]=\"node.ec\">\n      </div>\n    </div>\n  </div>\n</div>\n\n<button type=\"button\" (click)=\"submit()\">Generate</button>\n\n<div *ngIf=\"result\">\n  <button type=\"button\" (click)=\"copyToClipboard('tree')\">\n    Copy Tree\n  </button>\n  <button type=\"button\" (click)=\"copyToClipboard('nodes')\">\n    Copy Nodes\n  </button>\n  <button type=\"button\" (click)=\"copyToClipboard('items')\">\n    Copy Items\n  </button>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport fuzzysort from 'fuzzysort';\nimport moment from 'moment';\nimport { nanoid } from 'nanoid';\nimport { NodeHelper } from 'src/app/helpers/node-helper';\nimport { IItem, ItemType } from 'src/app/interfaces/item.interface';\nimport { INode } from 'src/app/interfaces/node.interface';\nimport { ISpiritTree } from 'src/app/interfaces/spirit-tree.interface';\nimport { ISpirit, SpiritType } from 'src/app/interfaces/spirit.interface';\nimport { ITravelingSpirit } from 'src/app/interfaces/traveling-spirit.interface';\nimport { DataJsonService } from 'src/app/services/data-json.service';\nimport { DataService } from 'src/app/services/data.service';\n\ninterface IFormNode {\n  nw?: boolean;\n  n?: boolean;\n  ne?: boolean\n\n  item?: string;\n  itemRef?: IItem;\n\n  c?: number;\n  h?: number;\n  sc?: number;\n  sh?: number;\n  ac?: number;\n  ec?: number;\n}\n\n@Component({\n  selector: 'app-editor-tree-spirit',\n  templateUrl: './editor-tree.component.html',\n  styleUrls: ['./editor-tree.component.less']\n})\nexport class EditorTreeComponent implements OnInit {\n  itemOptions = new Array<IItem>();\n\n  formNodes: Array<IFormNode>;\n\n  result?: ISpiritTree;\n\n  constructor(\n    private readonly _dataService: DataService,\n    private readonly _dataJsonService: DataJsonService,\n    private readonly _route: ActivatedRoute\n  ) {\n      this.formNodes = [];\n      for (let i = 0; i < 24; i++) { this.formNodes.push({\n        n: !((i+2) % 3)\n      }); }\n  }\n\n  ngOnInit(): void {\n    this.formNodes.forEach(n => n.item = undefined);\n\n    const copyTree = this._route.snapshot.queryParams['copy'];\n    if (copyTree) {\n      const tree = this._dataService.guidMap.get(copyTree) as ISpiritTree;\n      this.formNodes = this.nodeToFormNodes(tree.node);\n    }\n\n    this.itemOptions = [];\n\n    // Add items\n    this.itemOptions.push(...this._dataService.itemConfig.items);\n\n    // Create new items\n    this.itemOptions.push({ guid: 'DON\\'T PICK', name: '-- NEW ITEMS --', type: ItemType.Special });\n    this.itemOptions.push(this.createWingBuff());\n    this.itemOptions.push(this.createHeart());\n    this.itemOptions.push(this.createBlessing());\n    this.itemOptions.push(this.createBlessing());\n    this.itemOptions.push(this.createBlessing());\n    this.itemOptions.push(this.createBlessing());\n  }\n\n  toggleConnection(node: any, direction: string) {\n    node[direction] = !node[direction];\n  }\n\n  itemInputChanged(event: Event, i: number): void {\n    const target = (event.target as HTMLInputElement);\n    const value = target?.value as string;\n    if (!value) { return; }\n\n    const jsonNode = this.getNodeFromJson(value);\n    if (jsonNode) {\n      this.formNodes[i] = jsonNode;\n      return;\n    }\n\n    const item = this._dataService.guidMap.get(value) as IItem;\n    if (!item) { return; }\n\n    this.formNodes[i].item = item.guid;\n    this.formNodes[i].itemRef = item;\n\n    target.value = '';\n    target.blur();\n  }\n\n  itemInputEnter(event: KeyboardEvent, i: number): void {\n    if (event.key !== 'Enter') { return; }  // Only handle enter key\n\n    const target = (event.target as HTMLInputElement);\n    const value = target?.value as string;\n    if (!value) { return; }\n    const results = fuzzysort.go(value, this.itemOptions, { key: 'name', limit: 1 });\n    const item = results?.[0].obj as IItem;\n    if (!item) { return; }\n\n    this.formNodes[i].item = item.guid;\n    this.formNodes[i].itemRef = item;\n\n    target.value = '';\n  }\n\n  submit(): void {\n    const baseNode = this.formNodeToNodes();\n    const nodes = NodeHelper.all(baseNode);\n\n    // Create tree\n    const tree: ISpiritTree = {\n      guid: nanoid(10),\n      node: nodes[0]\n    };\n\n    console.log('tree generated', tree);\n\n    this.result = tree;\n  }\n\n  copyToClipboard(type: string): void {\n    let value = this.getForClipboard(type);\n    if (!value) { return; }\n    const startI = value.indexOf('{');\n    const endI = value.lastIndexOf('}');\n    value = value.substring(startI, endI + 1) + ',';\n    navigator.clipboard.writeText(value);\n  }\n\n  getForClipboard(type: string): string | undefined {\n    switch (type) {\n      case 'tree':\n        return this._dataJsonService.spiritTreesToJson([this.result!]);\n      case 'nodes':\n        return this._dataJsonService.nodesToJson(NodeHelper.all(this.result!.node));\n      case 'items': {\n        const nodes = NodeHelper.all(this.result!.node);\n        const newItems = nodes\n          .filter(n => n.item?.guid && !this._dataService.guidMap.has(n.item.guid))\n          .map(n => n.item!);\n        return this._dataJsonService.itemsToJson(newItems);\n      }\n    }\n    return undefined;\n  }\n\n  nodeToFormNodes(mainNode: INode): Array<IFormNode> {\n    const formNodes = new Array<IFormNode>();\n\n    for (let i = 0; i < 24; i++) {\n      formNodes.push({});\n    }\n\n    const defineNode = (i: number, node: INode) => {\n      formNodes[i] = {\n        item: node.item?.guid,\n        itemRef: node.item,\n        c: node.c,\n        h: node.h,\n        ac: node.ac,\n        ec: node.ec,\n        sc: node.sc,\n        sh: node.sh,\n        n: !!node.n,\n        nw: !!node.nw,\n        ne: !!node.ne\n      };\n\n      if (node.nw) { defineNode(i - 1, node.nw); }\n      if (node.n) { defineNode(i - 3, node.n); }\n      if (node.ne) { defineNode(i + 1, node.ne); }\n    };\n\n    let i = 22;\n    defineNode(i, mainNode);\n\n    return formNodes;\n  }\n\n  copyNodeToClipboard(node: IFormNode): void {\n    const n = {...node};\n    delete n.itemRef;\n\n    navigator.clipboard.writeText(JSON.stringify(n));\n  }\n\n  getNodeFromJson(json: string): IFormNode | undefined {\n    try {\n      const node = JSON.parse(json) as IFormNode;\n      if (node.item) {\n        node.itemRef = this._dataService.guidMap.get(node.item) as IItem;\n      }\n\n      return node;\n    } catch { return undefined; }\n  }\n\n  formNodeToNodes(node?: INode, i = 22): INode {\n    const formNode = this.formNodes[i];\n    node ??= this.formNodeToNode(formNode)!;\n    if (!formNode) { return node; }\n\n    // Left (north-west)\n    if (formNode.nw) {\n      const j = i - 1;\n      const relativeNode = this.formNodeToNode(this.formNodes[j]);\n      if (relativeNode) {\n        node.nw = relativeNode;\n      }\n      this.formNodeToNodes(relativeNode, j);\n    }\n\n    // Top (north)\n    if (formNode.n) {\n      const j = i - 3;\n      const relativeNode = this.formNodeToNode(this.formNodes[j]);\n      if (relativeNode) {\n        node.n = relativeNode;\n      }\n      this.formNodeToNodes(relativeNode, j);\n    }\n\n    // Right (north-east)\n    if (formNode.ne) {\n      const j = i + 1;\n      const relativeNode = this.formNodeToNode(this.formNodes[j]);\n      if (relativeNode) {\n        node.ne = relativeNode;\n      }\n      this.formNodeToNodes(relativeNode, j);\n    }\n\n    return node;\n  }\n\n  formNodeToNode(formNode: IFormNode): INode | undefined {\n    if (!formNode?.item) { return undefined; }\n\n    return {\n      guid: nanoid(10),\n      item: this.itemOptions.find(i => i.guid === formNode.item),\n      c: formNode.c,\n      h: formNode.h,\n      ac: formNode.ac,\n      ec: formNode.ec,\n      sc: formNode.sc,\n      sh: formNode.sh\n    };\n  }\n\n  createHeart(): IItem {\n    return {\n      guid: nanoid(10),\n      type: ItemType.Special,\n      name: 'Heart',\n      icon: 'https://static.wikia.nocookie.net/sky-children-of-the-light/images/d/d9/Heart.png'\n    }\n  }\n\n  createBlessing(): IItem {\n    return {\n      guid: nanoid(10),\n      type: ItemType.Special,\n      name: 'Blessing',\n      icon: 'https://static.wikia.nocookie.net/sky-children-of-the-light/images/8/8e/5CandlesSpell.png'\n    }\n  }\n\n  createWingBuff(): IItem {\n    return {\n      guid: nanoid(10),\n      type: ItemType.WingBuff,\n      name: 'Wing Buff',\n      icon: 'https://static.wikia.nocookie.net/sky-children-of-the-light/images/3/31/Winglight.png'\n    }\n  }\n}\n","<div>\n  Shop to copy: <input type=\"text\" [(ngModel)]=\"copyShopGuid\"  (ngModelChange)=\"shopGuidChanged()\"/><br/>\n  Returning IAPs: <input type=\"checkbox\" [(ngModel)]=\"returning\"/>\n  <button type=\"button\" (click)=\"submit()\">Submit</button>\n</div>\n\n<div *ngIf=\"result\">\n  <button type=\"button\" (click)=\"copyToClipboard('shop')\">\n    Copy Shop\n  </button>\n  <button type=\"button\" (click)=\"copyToClipboard('iaps')\">\n    Copy IAPs\n  </button>\n</div>\n","import { Component } from '@angular/core';\nimport { nanoid } from 'nanoid';\nimport { IShop } from 'src/app/interfaces/shop.interface';\nimport { DataService } from 'src/app/services/data.service';\n\n@Component({\n  selector: 'app-editor-shop',\n  templateUrl: './editor-shop.component.html',\n  styleUrls: ['./editor-shop.component.less']\n})\nexport class EditorShopComponent {\n  copyShopGuid?: string;\n  copyShop?: IShop;\n  returning = true;\n\n  result?: any;\n\n  constructor(\n    private readonly _dataService: DataService,\n  ) {}\n\n  shopGuidChanged(): void {\n    if (!this.copyShopGuid) { return; }\n    const shop = this._dataService.guidMap.get(this.copyShopGuid) as IShop;\n    if (!shop) { return; }\n    this.copyShop = shop;\n  }\n\n  submit(): void {\n    if (!this.copyShop) { return; }\n    // Copy IAPs\n    const iaps: Array<any> = [];\n    this.copyShop.iaps?.forEach(iap => {\n      iaps.push({\n        guid: nanoid(10),\n        name: iap.name,\n        price: iap.price,\n        returning: this.returning || undefined,\n        c: iap.c,\n        sc: iap.sc,\n        sp: iap.sp,\n        items: iap.items ? [...iap.items.map(i => i.guid)] : undefined\n      });\n    });\n\n    // Copy shop\n    const newShop = {\n      guid: nanoid(10),\n      type: this.copyShop.type,\n      spirit: this.copyShop.spirit?.guid || undefined,\n      iaps: iaps.map(iap => iap.guid)\n    };\n\n    this.result = {\n      shop: newShop,\n      iaps\n    };\n  }\n\n\n  copyToClipboard(type: string): void {\n    let value = this.getForClipboard(type);\n    if (!value) { return; }\n    let json = JSON.stringify(value, undefined, 2);\n    const startI = json.indexOf('{');\n    const endI = json.lastIndexOf('}');\n    json = json.substring(startI, endI + 1) + ',';\n    navigator.clipboard.writeText(json);\n  }\n\n  getForClipboard(type: string): Array<any> {\n    switch (type) {\n      case 'shop': return [this.result.shop];\n      case 'iaps': return this.result.iaps;\n      default: return [];\n    }\n  }\n}\n","Name\n<input type=\"text\" class=\"form-control\" placeholder=\"Name\" [(ngModel)]=\"name\">\nType\n<select class=\"form-control\" [(ngModel)]=\"type\">\n  <option *ngFor=\"let option of typeOptions\">{{option}}</option>\n</select>\nIcon\n<input type=\"text\" class=\"form-control\" placeholder=\"Icon\" [(ngModel)]=\"icon\">\n\n<button type=\"button\" class=\"btn btn-primary\" (click)=\"generate()\">Generate</button>\n","import { Component } from '@angular/core';\nimport { nanoid } from 'nanoid';\nimport { IItem, ItemType } from 'src/app/interfaces/item.interface';\n\n@Component({\n  selector: 'app-editor-item',\n  templateUrl: './editor-item.component.html',\n  styleUrls: ['./editor-item.component.less']\n})\nexport class EditorItemComponent {\n  name: string = '';\n  type: string = '';\n  icon: string = '';\n\n  typeOptions = [\n    '',\n    'Hat',\n    'Hair',\n    'Mask',\n    'Necklace',\n    'Outfit',\n    'Cape',\n    'Instrument',\n    'Held',\n    'Prop',\n    'Emote',\n    'Stance',\n    'Call',\n    'Spell',\n    'Music',\n    'Quest',\n    'WingBuff',\n    'Special'\n  ];\n\n  generate(): void {\n    let icon = this.icon;\n    const iRevision = icon.indexOf('/revision');\n    if (iRevision >= 0) { icon = icon.substring(0, iRevision); }\n\n    const item: IItem = {\n      guid: nanoid(10),\n      name: this.name,\n      type: this.type as ItemType,\n      icon\n    }\n\n    let json = JSON.stringify(item, null, 2);\n    navigator.clipboard.writeText(json + ',');\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { EditorDashboardComponent } from './components/dashboard/editor-dashboard.component';\nimport { EditorTravelingSpiritComponent } from './components/editor-traveling-spirit/editor-traveling-spirit.component';\nimport { EditorTreeComponent } from './components/editor-tree/editor-tree.component';\nimport { EditorShopComponent } from './components/editor-shop/editor-shop.component';\nimport { EditorItemComponent } from './components/editor-item/editor-item.component';\n\nconst routes: Routes = [\n  { path: '', component: EditorDashboardComponent },\n  { path: 'ts', component: EditorTravelingSpiritComponent },\n  { path: 'tree', component: EditorTreeComponent },\n  { path: 'shop', component: EditorShopComponent },\n  { path: 'item', component: EditorItemComponent },\n];\n\n@NgModule({\n  declarations: [],\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports: [\n    RouterModule\n  ]\n})\nexport class EditorRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { EditorDashboardComponent } from './components/dashboard/editor-dashboard.component';\nimport { EditorRoutingModule } from './editor-routing.module';\nimport { EditorTravelingSpiritComponent } from './components/editor-traveling-spirit/editor-traveling-spirit.component';\nimport { FormsModule } from '@angular/forms';\nimport { EditorTreeComponent } from './components/editor-tree/editor-tree.component';\nimport { EditorShopComponent } from './components/editor-shop/editor-shop.component';\nimport { EditorItemComponent } from './components/editor-item/editor-item.component';\nimport { MatIconModule } from '@angular/material/icon';\n\n@NgModule({\n  declarations: [\n    EditorDashboardComponent,\n    EditorTravelingSpiritComponent,\n    EditorTreeComponent,\n    EditorShopComponent,\n    EditorItemComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatIconModule,\n    EditorRoutingModule\n  ]\n})\nexport class EditorModule { }\n"],"x_google_ignoreList":[2]}