<div class="map-container">
  <div class="map-controls map-controls-tl">
    <button type="button" [ngbTooltip]="'Home'" container="body" placement="bottom-start" (click)="gotoHome()">
      <mat-icon>house</mat-icon>
    </button>
    <button type="button" [ngbTooltip]="'Choose map'" container="body" placement="bottom-start" (click)="isAreaOverlayVisible.set(true)">
      <mat-icon>globe</mat-icon>
    </button>
    <button type="button" [ngbTooltip]="'Restart'" container="body" placement="bottom-start" (click)="promptRestart()">
      <mat-icon>restart_alt</mat-icon>
    </button>
  </div>
  <div class="map-controls map-controls-tr">
    <div class="box">This tracker is incomplete. Thank you for your patience.</div>
  </div>
  <div class="map-controls map-controls-bl">
    <div class="box d-inline-block">{{ waxInAreaFound() }} / {{ waxInArea() }} wax</div>
  </div>
  <div #map id="cr-map" class="map"></div>
</div>

@if (isAreaOverlayVisible()) {
  <app-overlay (close)="isAreaOverlayVisible.set(false)">
    <div class="grid grid-2 gap-half">
      <div><b>Map</b></div>
      <div><b>Wax</b></div>
    @for (item of areaOverlayData(); track item) {
          <div class="link" (click)="loadAreaMap(item.area);isAreaOverlayVisible.set(false);">
            {{ item.area.name }}
          </div>
          @let completed = item.found === item.total;
          <div [class.c-completed]="completed" [class.fw-bold]="completed">{{ item.found }} / {{ item.total }}</div>
          <!-- @for (group of area.groups; track group) {
            <div class="group">
              GROUP: {{ group.name }}
            </div>
            } -->
        }
    </div>
  </app-overlay>
}
