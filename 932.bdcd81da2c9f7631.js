"use strict";(self.webpackChunkSkyGame_Planner=self.webpackChunkSkyGame_Planner||[]).push([[932],{1932:(V,S,p)=>{p.r(S),p.d(S,{EditorModule:()=>f});var m=p(4666),y=p(4069),t=p(2560);const k=function(){return["/editor/ts"]},E=function(){return["/editor/tree"]},w=function(){return["/editor/shop"]};class T{}T.\u0275fac=function(n){return new(n||T)},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-editor-dashboard"]],decls:6,vars:6,consts:[[3,"routerLink"]],template:function(n,e){1&n&&(t.TgZ(0,"a",0),t._uU(1,"Create TS"),t.qZA(),t.TgZ(2,"a",0),t._uU(3,"Create Spirit Tree"),t.qZA(),t.TgZ(4,"a",0),t._uU(5,"Create Shop"),t.qZA()),2&n&&(t.Q6J("routerLink",t.DdM(3,k)),t.xp6(2),t.Q6J("routerLink",t.DdM(4,E)),t.xp6(2),t.Q6J("routerLink",t.DdM(5,w)))},dependencies:[y.rH]});var O=p(6901),b=p.n(O);let a=(c=21)=>crypto.getRandomValues(new Uint8Array(c)).reduce((n,e)=>n+((e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_"),"");var g=p(9687),l=p(9037),Z=p(2468);class _{constructor(){}travelingSpiritsToJson(n){return this.stringify(n.map(e=>{const o=e.date;return{guid:e.guid,date:{day:o.date(),month:o.month()+1,year:o.year()},spirit:e.spirit.guid,tree:e.tree.guid}}))}spiritTreesToJson(n){return this.stringify(n.map(e=>({guid:e.guid,node:e.node.guid})))}nodesToJson(n){return this.stringify(n.map(e=>({guid:e.guid,item:e.item?.guid,c:e.c,h:e.h,sc:e.sc,sh:e.sh,ac:e.ac,ec:e.ec,nw:e.nw?.guid,n:e.n?.guid,ne:e.ne?.guid})))}itemsToJson(n){return this.stringify(n.map(e=>({guid:e.guid,type:e.type,name:e.name,icon:e.icon,level:e.level})))}stringify(n){return JSON.stringify(n,void 0,2)}}_.\u0275fac=function(n){return new(n||_)},_.\u0275prov=t.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"});var d=p(2508),J=p(4583);function U(c,n){if(1&c&&(t.TgZ(0,"option",7),t._uU(1),t.qZA()),2&c){const e=n.$implicit;t.Q6J("value",e.guid),t.xp6(1),t.Oqu(e.name)}}function q(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"div",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.toggleConnection(i,"nw"))}),t._uU(1,"NW"),t.qZA()}if(2&c){const e=t.oxw().$implicit;t.ekj("green",e.nw)}}function F(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.toggleConnection(i,"ne"))}),t._uU(1,"NE"),t.qZA()}if(2&c){const e=t.oxw().$implicit;t.ekj("green",e.ne)}}function H(c,n){if(1&c&&(t.ynx(0),t._uU(1),t.BQk()),2&c){const e=t.oxw().$implicit;t.xp6(1),t.hij("(",e.level,")")}}function G(c,n){if(1&c&&(t.TgZ(0,"option",7),t._uU(1),t.TgZ(2,"span"),t.YNc(3,H,2,1,"ng-container",6),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&c){const e=n.$implicit;t.Q6J("value",e.guid),t.xp6(1),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("ngIf",e.level),t.xp6(2),t.hij("(",e.guid,")")}}function Q(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"div",8),t.YNc(1,q,2,2,"div",9),t.TgZ(2,"div",10),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.toggleConnection(r,"n"))}),t._uU(3,"N"),t.qZA(),t.YNc(4,F,2,2,"div",11),t.TgZ(5,"div")(6,"select",0),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).$implicit;return t.KtG(s.item=i)}),t._UZ(7,"option",12),t.YNc(8,G,6,4,"option",1),t.qZA()(),t.TgZ(9,"div"),t._UZ(10,"mat-icon",13),t.TgZ(11,"input",14),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).$implicit;return t.KtG(s.c=i)}),t.qZA(),t._UZ(12,"mat-icon",15),t.TgZ(13,"input",14),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).$implicit;return t.KtG(s.h=i)}),t.qZA(),t._UZ(14,"mat-icon",16),t.TgZ(15,"input",14),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).$implicit;return t.KtG(s.ac=i)}),t.qZA()()()}if(2&c){const e=n.$implicit,o=n.index,i=t.oxw();t.xp6(1),t.Q6J("ngIf",o%3==1),t.xp6(1),t.ekj("green",e.n),t.xp6(2),t.Q6J("ngIf",o%3==1),t.xp6(2),t.Q6J("ngModel",e.item),t.xp6(2),t.Q6J("ngForOf",i.itemOptions),t.xp6(3),t.Q6J("ngModel",e.c),t.xp6(2),t.Q6J("ngModel",e.h),t.xp6(2),t.Q6J("ngModel",e.ac)}}function K(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"div")(1,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.copyToClipboard("ts"))}),t._uU(2," Copy TS "),t.qZA(),t.TgZ(3,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.copyToClipboard("tree"))}),t._uU(4," Copy Tree "),t.qZA(),t.TgZ(5,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.copyToClipboard("nodes"))}),t._uU(6," Copy Nodes "),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.copyToClipboard("items"))}),t._uU(8," Copy Items "),t.qZA()()}}class v{constructor(n,e){this.dataService=n,this.dataJsonService=e,this.spiritOptions=new Array,this.itemOptions=new Array,this.tsCount=n.travelingSpiritConfig.items.length,this.spiritOptions=n.spiritConfig.items.filter(i=>"Season"===i.type).sort((i,r)=>i.name.localeCompare(r.name));const o=n.travelingSpiritConfig.items.at(-1).date;this.date=o.add(2,"weeks").isoWeekday(4).format("YYYY-MM-DD"),this.formNodes=[];for(let i=0;i<24;i++)this.formNodes.push({n:!((i+2)%3)})}spiritChanged(){this.formNodes.forEach(i=>i.item=void 0),this.itemOptions=[];const n=[...this.dataService.travelingSpiritConfig.items].reverse().find(i=>i.spirit.guid===this.spirit),e=this.dataService.spiritConfig.items.find(i=>i.guid===this.spirit)?.tree;let o=[];n?(o=g.f.all(n.tree.node),this.formNodes=this.nodeToFormNodes(n.tree.node)):e&&(o=g.f.all(e.node).filter(i=>"Season Heart"!==i.item?.name)),this.itemOptions.push({guid:"DON'T PICK",name:"-- SPIRIT ITEMS --",type:l.q.Special}),this.itemOptions.push(...o.filter(i=>i.item).map(i=>i.item)),this.itemOptions.push({guid:"DON'T PICK",name:"-- NEW ITEMS --",type:l.q.Special}),this.itemOptions.push(this.createWingBuff()),this.itemOptions.push(this.createHeart()),this.itemOptions.push(this.createBlessing()),this.itemOptions.push(this.createBlessing()),this.itemOptions.push(this.createBlessing()),this.itemOptions.push(this.createBlessing())}toggleConnection(n,e){n[e]=!n[e]}submit(){const n=this.spiritOptions.find(C=>C.guid==this.spirit),e=this.dataService.travelingSpiritConfig.items.filter(C=>C.spirit.guid===this.spirit).length;if(!n)return void alert("No spirit");const o=this.formNodeToNodes(),i=g.f.all(o),r={guid:a(10),node:i[0]},s=b()(new Date(this.date)),u={guid:a(10),date:s,endDate:s.add(4,"days"),spirit:n,tree:r,number:this.tsCount+1,visit:e+1};console.log("ts generated",u),this.result=u}copyToClipboard(n){let e=this.getForClipboard(n);if(!e)return;const o=e.indexOf("{"),i=e.lastIndexOf("}");e=e.substring(o,i+1)+",",navigator.clipboard.writeText(e)}getForClipboard(n){switch(n){case"ts":return this.dataJsonService.travelingSpiritsToJson([this.result]);case"tree":return this.dataJsonService.spiritTreesToJson([this.result.tree]);case"nodes":return this.dataJsonService.nodesToJson(g.f.all(this.result.tree.node));case"items":{const o=g.f.all(this.result.tree.node).filter(i=>i.item?.guid&&!this.dataService.guidMap.has(i.item.guid)).map(i=>i.item);return this.dataJsonService.itemsToJson(o)}}}nodeToFormNodes(n){const e=new Array;for(let r=0;r<24;r++)e.push({});const o=(r,s)=>{e[r]={item:s.item?.guid,c:s.c,h:s.h,ac:s.ac,n:!!s.n,nw:!!s.nw,ne:!!s.ne},s.nw&&o(r-1,s.nw),s.n&&o(r-3,s.n),s.ne&&o(r+1,s.ne)};return o(22,n),e}formNodeToNodes(n,e=22){const o=this.formNodes[e];if(n??=this.formNodeToNode(o),!o)return n;if(o.nw){const i=e-1,r=this.formNodeToNode(this.formNodes[i]);r&&(n.nw=r),this.formNodeToNodes(r,i)}if(o.n){const i=e-3,r=this.formNodeToNode(this.formNodes[i]);r&&(n.n=r),this.formNodeToNodes(r,i)}if(o.ne){const i=e+1,r=this.formNodeToNode(this.formNodes[i]);r&&(n.ne=r),this.formNodeToNodes(r,i)}return n}formNodeToNode(n){if(n?.item)return{guid:a(10),item:this.itemOptions.find(e=>e.guid===n.item),c:n.c,h:n.h,ac:n.ac}}createHeart(){return{guid:a(10),type:l.q.Special,name:"Heart",icon:"https://static.wikia.nocookie.net/sky-children-of-the-light/images/d/d9/Heart.png"}}createBlessing(){return{guid:a(10),type:l.q.Special,name:"Blessing",icon:"https://static.wikia.nocookie.net/sky-children-of-the-light/images/8/8e/5CandlesSpell.png"}}createWingBuff(){return{guid:a(10),type:l.q.WingBuff,name:"Wing Buff",icon:"https://static.wikia.nocookie.net/sky-children-of-the-light/images/3/31/Winglight.png"}}}v.\u0275fac=function(n){return new(n||v)(t.Y36(Z.D),t.Y36(_))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-editor-traveling-spirit"]],decls:17,vars:7,consts:[[1,"mono",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","date",3,"ngModel","ngModelChange"],[1,"grid-container"],["class","grid-item",4,"ngFor","ngForOf"],["type","button",3,"click"],[4,"ngIf"],[3,"value"],[1,"grid-item"],["class","grid-item-connection grid-item-nw",3,"green","click",4,"ngIf"],[1,"grid-item-connection","grid-item-n",3,"click"],["class","grid-item-connection grid-item-ne",3,"green","click",4,"ngIf"],["value",""],["svgIcon","candle"],["type","number",1,"cost",3,"ngModel","ngModelChange"],["svgIcon","heart"],["svgIcon","ascended-candle"],[1,"grid-item-connection","grid-item-nw",3,"click"],[1,"grid-item-connection","grid-item-ne",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA(),t.TgZ(2,"div"),t._uU(3," Spirit: "),t.TgZ(4,"select",0),t.NdJ("ngModelChange",function(i){return e.spirit=i})("ngModelChange",function(){return e.spiritChanged()}),t.YNc(5,U,2,2,"option",1),t.qZA()(),t.TgZ(6,"div"),t._uU(7," Date: "),t.TgZ(8,"input",2),t.NdJ("ngModelChange",function(i){return e.date=i}),t.qZA()(),t.TgZ(9,"div"),t._uU(10," Nodes"),t._UZ(11,"br"),t.TgZ(12,"div",3),t.YNc(13,Q,16,9,"div",4),t.qZA()(),t.TgZ(14,"button",5),t.NdJ("click",function(){return e.submit()}),t._uU(15,"Generate"),t.qZA(),t.YNc(16,K,9,0,"div",6)),2&n&&(t.xp6(1),t.AsE(" There are currently ",e.tsCount," TS registered. Add #",e.tsCount+1," now.\n"),t.xp6(3),t.Q6J("ngModel",e.spirit),t.xp6(1),t.Q6J("ngForOf",e.spiritOptions),t.xp6(3),t.Q6J("ngModel",e.date),t.xp6(5),t.Q6J("ngForOf",e.formNodes),t.xp6(3),t.Q6J("ngIf",e.result))},dependencies:[m.sg,m.O5,d.YN,d.Kr,d.Fj,d.wV,d.EJ,d.JJ,d.On,J.Hw],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-gap:10px}.grid-item[_ngcontent-%COMP%]{position:relative;background-color:var(--color-item-background);padding:var(--padding-content);padding-top:25px;text-align:center}.grid-item-connection[_ngcontent-%COMP%]{position:absolute;background:#800;top:0;padding:2px;line-height:16px}.grid-item-connection.green[_ngcontent-%COMP%]{background:#080}.grid-item-nw[_ngcontent-%COMP%]{left:0}.grid-item-n[_ngcontent-%COMP%]{left:50%;transform:translate(-50%)}.grid-item-ne[_ngcontent-%COMP%]{right:0}.cost[_ngcontent-%COMP%]{width:60px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{display:inline-block;line-height:14px;font-size:14px}"]});var P=p(5751),j=p.n(P);function $(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"div",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.toggleConnection(i,"nw"))}),t._uU(1,"NW"),t.qZA()}if(2&c){const e=t.oxw().$implicit;t.ekj("green",e.nw)}}function Y(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.toggleConnection(i,"ne"))}),t._uU(1,"NE"),t.qZA()}if(2&c){const e=t.oxw().$implicit;t.ekj("green",e.ne)}}function B(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"b",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.copyNodeToClipboard(i))}),t._uU(1),t.qZA()}if(2&c){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.item)}}function D(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"div",4),t.YNc(1,$,2,2,"div",5),t.TgZ(2,"div",6),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.toggleConnection(r,"n"))}),t._uU(3,"N"),t.qZA(),t.YNc(4,Y,2,2,"div",7),t.TgZ(5,"div")(6,"div",8),t._uU(7),t.qZA(),t.TgZ(8,"div",8),t.YNc(9,B,2,1,"b",9),t.qZA(),t.TgZ(10,"input",10),t.NdJ("input",function(i){const s=t.CHM(e).index,u=t.oxw();return t.KtG(u.itemInputChanged(i,s))})("keydown",function(i){const s=t.CHM(e).index,u=t.oxw();return t.KtG(u.itemInputEnter(i,s))}),t.qZA()(),t.TgZ(11,"div",11),t._UZ(12,"mat-icon",12),t.TgZ(13,"input",13),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).$implicit;return t.KtG(s.c=i)}),t.qZA(),t._UZ(14,"mat-icon",14),t.TgZ(15,"input",13),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).$implicit;return t.KtG(s.h=i)}),t.qZA(),t._UZ(16,"mat-icon",15),t.TgZ(17,"input",13),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).$implicit;return t.KtG(s.sc=i)}),t.qZA(),t._UZ(18,"mat-icon",16),t.TgZ(19,"input",13),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).$implicit;return t.KtG(s.sh=i)}),t.qZA(),t._UZ(20,"mat-icon",17),t.TgZ(21,"input",13),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).$implicit;return t.KtG(s.ac=i)}),t.qZA(),t._UZ(22,"mat-icon",18),t.TgZ(23,"input",13),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).$implicit;return t.KtG(s.ec=i)}),t.qZA()()()}if(2&c){const e=n.$implicit,o=n.index;t.xp6(1),t.Q6J("ngIf",o%3==1),t.xp6(1),t.ekj("green",e.n),t.xp6(2),t.Q6J("ngIf",o%3==1),t.xp6(3),t.hij("",(null==e.itemRef?null:e.itemRef.name)||"","\xa0"),t.xp6(2),t.Q6J("ngIf",e.item),t.xp6(4),t.Q6J("ngModel",e.c),t.xp6(2),t.Q6J("ngModel",e.h),t.xp6(2),t.Q6J("ngModel",e.sc),t.xp6(2),t.Q6J("ngModel",e.sh),t.xp6(2),t.Q6J("ngModel",e.ac),t.xp6(1),t.Q6J("inline",!1),t.xp6(1),t.Q6J("ngModel",e.ec)}}function W(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"div")(1,"button",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.copyToClipboard("tree"))}),t._uU(2," Copy Tree "),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.copyToClipboard("nodes"))}),t._uU(4," Copy Nodes "),t.qZA(),t.TgZ(5,"button",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.copyToClipboard("items"))}),t._uU(6," Copy Items "),t.qZA()()}}class N{constructor(n,e,o){this._dataService=n,this._dataJsonService=e,this._route=o,this.itemOptions=new Array,this.formNodes=[];for(let i=0;i<30;i++)this.formNodes.push({n:!((i+2)%3)})}ngOnInit(){this.formNodes.forEach(e=>e.item=void 0);const n=this._route.snapshot.queryParams.copy;if(n){const e=this._dataService.guidMap.get(n);this.formNodes=this.nodeToFormNodes(e.node)}this.itemOptions=[],this.itemOptions.push(...this._dataService.itemConfig.items),this.itemOptions.push({guid:"DON'T PICK",name:"-- NEW ITEMS --",type:l.q.Special}),this.itemOptions.push(this.createWingBuff()),this.itemOptions.push(this.createHeart()),this.itemOptions.push(this.createBlessing()),this.itemOptions.push(this.createBlessing()),this.itemOptions.push(this.createBlessing()),this.itemOptions.push(this.createBlessing())}toggleConnection(n,e){n[e]=!n[e]}itemInputChanged(n,e){const o=n.target,i=o?.value;if(!i)return;const r=this.getNodeFromJson(i);if(r)return void(this.formNodes[e]=r);const s=this._dataService.guidMap.get(i);!s||(this.formNodes[e].item=s.guid,this.formNodes[e].itemRef=s,o.value="",o.blur())}itemInputEnter(n,e){if("Enter"!==n.key)return;const o=n.target,i=o?.value;if(!i)return;const s=j().go(i,this.itemOptions,{key:"name",limit:1})?.[0].obj;!s||(this.formNodes[e].item=s.guid,this.formNodes[e].itemRef=s,o.value="")}submit(){const n=this.formNodeToNodes(),e=g.f.all(n),o={guid:a(10),node:e[0]};console.log("tree generated",o),this.result=o}copyToClipboard(n){let e=this.getForClipboard(n);if(!e)return;const o=e.indexOf("{"),i=e.lastIndexOf("}");e=e.substring(o,i+1)+",",navigator.clipboard.writeText(e)}getForClipboard(n){switch(n){case"tree":return this._dataJsonService.spiritTreesToJson([this.result]);case"nodes":return this._dataJsonService.nodesToJson(g.f.all(this.result.node));case"items":{const o=g.f.all(this.result.node).filter(i=>i.item?.guid&&!this._dataService.guidMap.has(i.item.guid)).map(i=>i.item);return this._dataJsonService.itemsToJson(o)}}}nodeToFormNodes(n){const e=new Array;for(let r=0;r<30;r++)e.push({});const o=(r,s)=>{e[r]={item:s.item?.guid,itemRef:s.item,c:s.c,h:s.h,ac:s.ac,ec:s.ec,sc:s.sc,sh:s.sh,n:!!s.n,nw:!!s.nw,ne:!!s.ne},s.nw&&o(r-1,s.nw),s.n&&o(r-3,s.n),s.ne&&o(r+1,s.ne)};return o(28,n),e}copyNodeToClipboard(n){const e={...n};delete e.itemRef,navigator.clipboard.writeText(JSON.stringify(e))}getNodeFromJson(n){try{const e=JSON.parse(n);return e.item&&(e.itemRef=this._dataService.guidMap.get(e.item)),e}catch{return}}formNodeToNodes(n,e=28){const o=this.formNodes[e];if(n??=this.formNodeToNode(o),!o)return n;if(o.nw){const i=e-1,r=this.formNodeToNode(this.formNodes[i]);r&&(n.nw=r),this.formNodeToNodes(r,i)}if(o.n){const i=e-3,r=this.formNodeToNode(this.formNodes[i]);r&&(n.n=r),this.formNodeToNodes(r,i)}if(o.ne){const i=e+1,r=this.formNodeToNode(this.formNodes[i]);r&&(n.ne=r),this.formNodeToNodes(r,i)}return n}formNodeToNode(n){if(n?.item)return{guid:a(10),item:this.itemOptions.find(e=>e.guid===n.item),c:n.c,h:n.h,ac:n.ac,ec:n.ec,sc:n.sc,sh:n.sh}}createHeart(){return{guid:a(10),type:l.q.Special,name:"Heart",icon:"https://static.wikia.nocookie.net/sky-children-of-the-light/images/d/d9/Heart.png"}}createBlessing(){return{guid:a(10),type:l.q.Special,name:"Blessing",icon:"https://static.wikia.nocookie.net/sky-children-of-the-light/images/8/8e/5CandlesSpell.png"}}createWingBuff(){return{guid:a(10),type:l.q.WingBuff,name:"Wing Buff",icon:"https://static.wikia.nocookie.net/sky-children-of-the-light/images/3/31/Winglight.png"}}}function R(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"div")(1,"button",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.copyToClipboard("shop"))}),t._uU(2," Copy Shop "),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.copyToClipboard("iaps"))}),t._uU(4," Copy IAPs "),t.qZA()()}}N.\u0275fac=function(n){return new(n||N)(t.Y36(Z.D),t.Y36(_),t.Y36(y.gz))},N.\u0275cmp=t.Xpm({type:N,selectors:[["app-editor-tree-spirit"]],decls:8,vars:2,consts:[[1,"grid-container"],["class","grid-item",4,"ngFor","ngForOf"],["type","button",3,"click"],[4,"ngIf"],[1,"grid-item"],["class","grid-item-connection grid-item-nw",3,"green","click",4,"ngIf"],[1,"grid-item-connection","grid-item-n",3,"click"],["class","grid-item-connection grid-item-ne",3,"green","click",4,"ngIf"],[1,"d-inline-block"],[3,"click",4,"ngIf"],[3,"input","keydown"],[1,"mt-1"],["svgIcon","candle"],["type","number",1,"cost",3,"ngModel","ngModelChange"],["svgIcon","heart"],["svgIcon","candle",1,"seasonal"],["svgIcon","heart",1,"seasonal"],["svgIcon","ascended-candle"],["svgIcon","ticket",3,"inline"],[1,"grid-item-connection","grid-item-nw",3,"click"],[1,"grid-item-connection","grid-item-ne",3,"click"],[3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div"),t._uU(1," Nodes"),t._UZ(2,"br"),t.TgZ(3,"div",0),t.YNc(4,D,24,13,"div",1),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return e.submit()}),t._uU(6,"Generate"),t.qZA(),t.YNc(7,W,7,0,"div",3)),2&n&&(t.xp6(4),t.Q6J("ngForOf",e.formNodes),t.xp6(3),t.Q6J("ngIf",e.result))},dependencies:[m.sg,m.O5,d.Fj,d.wV,d.JJ,d.On,J.Hw],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-gap:10px}.grid-item[_ngcontent-%COMP%]{position:relative;background-color:var(--color-item-background);padding:var(--padding-content);padding-top:25px;text-align:center}.grid-item-connection[_ngcontent-%COMP%]{position:absolute;background:#800;top:0;padding:2px;line-height:16px}.grid-item-connection.green[_ngcontent-%COMP%]{background:#080}.grid-item-nw[_ngcontent-%COMP%]{left:0}.grid-item-n[_ngcontent-%COMP%]{left:50%;transform:translate(-50%)}.grid-item-ne[_ngcontent-%COMP%]{right:0}.cost[_ngcontent-%COMP%]{width:60px}input[_ngcontent-%COMP%]{display:inline-block;line-height:14px;font-size:14px}"]});class M{constructor(n){this._dataService=n,this.returning=!0}shopGuidChanged(){if(!this.copyShopGuid)return;const n=this._dataService.guidMap.get(this.copyShopGuid);!n||(this.copyShop=n)}submit(){if(!this.copyShop)return;const n=[];this.copyShop.iaps?.forEach(o=>{n.push({guid:a(10),name:o.name,price:o.price,returning:this.returning||void 0,c:o.c,sc:o.sc,sp:o.sp,items:o.items?[...o.items.map(i=>i.guid)]:void 0})});const e={guid:a(10),type:this.copyShop.type,spirit:this.copyShop.spirit?.guid||void 0,iaps:n.map(o=>o.guid)};this.result={shop:e,iaps:n}}copyToClipboard(n){let e=this.getForClipboard(n);if(!e)return;let o=JSON.stringify(e,void 0,2);const i=o.indexOf("{"),r=o.lastIndexOf("}");o=o.substring(i,r+1)+",",navigator.clipboard.writeText(o)}getForClipboard(n){switch(n){case"shop":return[this.result.shop];case"iaps":return this.result.iaps;default:return[]}}}function z(c,n){if(1&c&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&c){const e=n.$implicit;t.xp6(1),t.Oqu(e)}}M.\u0275fac=function(n){return new(n||M)(t.Y36(Z.D))},M.\u0275cmp=t.Xpm({type:M,selectors:[["app-editor-shop"]],decls:9,vars:3,consts:[["type","text",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],["type","button",3,"click"],[4,"ngIf"]],template:function(n,e){1&n&&(t.TgZ(0,"div"),t._uU(1," Shop to copy: "),t.TgZ(2,"input",0),t.NdJ("ngModelChange",function(i){return e.copyShopGuid=i})("ngModelChange",function(){return e.shopGuidChanged()}),t.qZA(),t._UZ(3,"br"),t._uU(4," Returning IAPs: "),t.TgZ(5,"input",1),t.NdJ("ngModelChange",function(i){return e.returning=i}),t.qZA(),t.TgZ(6,"button",2),t.NdJ("click",function(){return e.submit()}),t._uU(7,"Submit"),t.qZA()(),t.YNc(8,R,5,0,"div",3)),2&n&&(t.xp6(2),t.Q6J("ngModel",e.copyShopGuid),t.xp6(3),t.Q6J("ngModel",e.returning),t.xp6(3),t.Q6J("ngIf",e.result))},dependencies:[m.O5,d.Fj,d.Wl,d.JJ,d.On]});class x{constructor(){this.name="",this.type="",this.icon="",this.typeOptions=["","Hat","Hair","Mask","Necklace","Outfit","Cape","Instrument","Held","Prop","Emote","Stance","Call","Spell","Music","Quest","WingBuff","Special"]}generate(){let n=this.icon;const e=n.indexOf("/revision");e>=0&&(n=n.substring(0,e));const o={guid:a(10),name:this.name,type:this.type,icon:n};let i=JSON.stringify(o,null,2);navigator.clipboard.writeText(i+",")}}x.\u0275fac=function(n){return new(n||x)},x.\u0275cmp=t.Xpm({type:x,selectors:[["app-editor-item"]],decls:9,vars:4,consts:[["type","text","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","text","placeholder","Icon",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(n,e){1&n&&(t._uU(0,"Name\n"),t.TgZ(1,"input",0),t.NdJ("ngModelChange",function(i){return e.name=i}),t.qZA(),t._uU(2,"\nType\n"),t.TgZ(3,"select",1),t.NdJ("ngModelChange",function(i){return e.type=i}),t.YNc(4,z,2,1,"option",2),t.qZA(),t._uU(5,"\nIcon\n"),t.TgZ(6,"input",3),t.NdJ("ngModelChange",function(i){return e.icon=i}),t.qZA(),t.TgZ(7,"button",4),t.NdJ("click",function(){return e.generate()}),t._uU(8,"Generate"),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.type),t.xp6(1),t.Q6J("ngForOf",e.typeOptions),t.xp6(2),t.Q6J("ngModel",e.icon))},dependencies:[m.sg,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.On]});const L=[{path:"",component:T},{path:"ts",component:v},{path:"tree",component:N},{path:"shop",component:M},{path:"item",component:x}];class h{}h.\u0275fac=function(n){return new(n||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[y.Bz.forChild(L),y.Bz]});class f{}f.\u0275fac=function(n){return new(n||f)},f.\u0275mod=t.oAB({type:f}),f.\u0275inj=t.cJS({imports:[m.ez,d.u5,J.Ps,h]})}}]);
//# sourceMappingURL=932.bdcd81da2c9f7631.js.map